import time


# to print the fucking board
def print_board(b):
    print('# 1 2 3 - x')
    for i in range(3):
        print(i+1, " ".join(b[i]))
    print('|\ny\n')
    
    time.sleep(0.25)


# get the coordinates for where to place in a turn
def placement(player):
    print(f"player {player} turn")
    
    try:
        y, x = int(input("enter the y cordinate: ")), int(input("enter the x cordinate: "))
    except ValueError:
        print("error, please enter numbers")
        return 1
    
    return y, x


# check the asken place is valid
def valid_place(y, x, main_board, player):
    stop = False
    
    if y > 0 and x > 0:
        y, x = y-1, x-1
    else:
        print("error, please enter numbers in range")
        return 1
    
    try:
        if main_board[y][x]=='-':
            if player==1:
                main_board[y][x] = 'X'
            elif player==2:
                main_board[y][x] = 'O'
        else:
            print("error, place taken")
            return 1
    except IndexError:
        print("error, please enter numbers in range")
        return 1
    
    return 0


# to check what the player will do in his turn
def turn(player, main_board):
    place = placement(player)
    
    if place!=1:
        y, x = place
    else:
        return 1
    
    if valid_place(y, x, main_board, player)==1:
        return 1
    
    return 0


# checking if a row is all the same
def check_same(lst):
    first_element = lst[0]
    for i in range(1, len(lst)):
        if lst[i] != first_element:
            return False
    return True


# converting X into 1, O into 2, '-' will stay same
def convert_symbol(symbol):
    if symbol=='X':
        return 1
    elif symbol=='O':
        return 2
    
    return '-'


# check the straight lines in the board
def straight_line_check(board):
    column = ['', '', '']
    
    for i in range(3):
        for j in range(3):
            if board[i][j]!='-':
                column[j] = board[i][j]
                
                if check_same(column):
                    symbol = convert_symbol(column[0])
                    
                    return symbol
            
        for j in range(3):
            if board[j][i]!='-':
                column[j] = board[j][i]
                
                if check_same(board):
                    symbol = convert_symbol(column[0])
                    
                    return symbol
    
    return 0


# check diagonal lines in the board
def diagonal_line_check(m):
    symbol = m[0][0]
    diagonal_1 = True
    for i in range(1, len(m)):
        if m[i][i] != symbol or symbol == '-':
            diagonal_1 = False
            break
    
    symbol = convert_symbol(symbol)
    
    if diagonal_1:
        return symbol
    
    symbol = m[0][len(m)-1]
    diagonal_2 = True
    for i in range(len(m)-2, -1, -1):
        if m[len(m)-i-1][i] != symbol or symbol == '-':
            diagonal_2 = False
            break
    
    symbol = convert_symbol(symbol)
    
    if diagonal_2:
        return symbol
    
    return 0


# checks if theres a tie in the game
def tie_check(m):
    for r1 in m:
        for r2 in r1:
            if r2=='-':
                return 1
    
    return 0


# check if theres a winner
def winner_check(m):
    if straight_line_check(m)!=0:
        return straight_line_check(m)
    elif diagonal_line_check(m)!=0:
        return diagonal_line_check(m)
    elif tie_check(m)==0:
        return 3
    
    return 0


# the main game code
def main_game(player, main_board):
    if player==1:
        if turn(player, main_board)==1:
            player = 1
        else:
            player = 2
        
    elif player==2:
        if turn(player, main_board)==1:
            player = 2
        else:
            player = 1
    
    print_board(main_board)
    
    if winner_check(main_board)!=0 and winner_check(main_board)!=3:
        print(f"player {winner_check(main_board)} won")
        return 0
    elif winner_check(main_board)==3:
        print("tie")
        return 0
    else:
        return player, main_board

# main fucking code
def main():
    
    player = 1
    
    # change the start position to test diffrent things
    main_board = [
        ['-', '-', '-'],
        ['-', '-', '-'],
        ['-', '-', '-']
    ]
    
    print_board(main_board)
    
    while True:
        game = main_game(player, main_board)
        
        if game!=0:
            player, main_board = game
        else:
            return
    
    return

main()
